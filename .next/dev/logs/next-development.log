[00:00:00.560] Server  WARN     ‚ö† Minimum recommended TypeScript version is v5.1.0, older versions can potentially be incompatible with Next.js. Detected: 5.0.2
[00:00:00.631] Server  LOG      ‚úì Ready in 421ms
[00:00:05.074] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:05.206] Browser LOG     üîç Checking login status...
[00:00:05.206] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:05.206] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:05.206] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","r":"","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1763895285702}
[00:00:06.004] Browser LOG     üìä Login status: {"isAuthenticated":false,"isLoggedIn":false}
[00:00:15.712] Browser LOG     üîê Connected wallet address: 0x133e676148b785ebf67351ff806162803e3a042c
[00:00:15.882] Server  LOG     prisma:query "INSERT INTO \"public\".\"users\" (\"id\",\"address\",\"nonce\",\"isLoggedIn\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,$5,$6) ON CONFLICT (\"address\") DO UPDATE SET \"nonce\" = $7, \"updatedAt\" = $8 WHERE (\"public\".\"users\".\"address\" = $9 AND 1=1) RETURNING \"public\".\"users\".\"id\", \"public\".\"users\".\"address\", \"public\".\"users\".\"nonce\", \"public\".\"users\".\"isLoggedIn\", \"public\".\"users\".\"createdAt\", \"public\".\"users\".\"updatedAt\""
[00:00:18.471] Server  LOG     prisma:query "SELECT \"public\".\"users\".\"id\", \"public\".\"users\".\"address\", \"public\".\"users\".\"nonce\", \"public\".\"users\".\"isLoggedIn\", \"public\".\"users\".\"createdAt\", \"public\".\"users\".\"updatedAt\" FROM \"public\".\"users\" WHERE (\"public\".\"users\".\"address\" = $1 AND 1=1) LIMIT $2 OFFSET $3"
[00:00:18.486] Server  LOG     prisma:query "UPDATE \"public\".\"users\" SET \"nonce\" = $1, \"updatedAt\" = $2 WHERE (\"public\".\"users\".\"id\" = $3 AND 1=1) RETURNING \"public\".\"users\".\"id\", \"public\".\"users\".\"address\", \"public\".\"users\".\"nonce\", \"public\".\"users\".\"isLoggedIn\", \"public\".\"users\".\"createdAt\", \"public\".\"users\".\"updatedAt\""
[00:00:18.489] Server  LOG     prisma:query "INSERT INTO \"public\".\"sessions\" (\"id\",\"userId\",\"token\",\"createdAt\",\"expiresAt\") VALUES ($1,$2,$3,$4,$5) RETURNING \"public\".\"sessions\".\"id\", \"public\".\"sessions\".\"userId\", \"public\".\"sessions\".\"token\", \"public\".\"sessions\".\"createdAt\", \"public\".\"sessions\".\"expiresAt\""
[00:00:18.607] Browser LOG     üîç Checking native CHZ balance...
[00:00:18.607] Browser LOG     üîç Wallet address: 0x133e676148b785ebf67351ff806162803e3a042c
[00:00:18.607] Browser LOG     üìä Raw balance: 16002796918000000000
[00:00:18.607] Browser LOG     üí∞ Native CHZ balance: 16.00 CHZ
[00:00:47.313] Browser LOG     Processing native CHZ payment...
[00:00:47.313] Browser LOG     üîê Authenticated address: 0x133e676148b785ebf67351ff806162803e3a042c
[00:00:47.313] Browser LOG     üí≥ Current MetaMask address: 0x133E676148B785eBf67351FF806162803E3a042C
[00:00:47.313] Browser LOG     üí≥ Executing payment for address: 0x133E676148B785eBf67351FF806162803E3a042C
[00:00:47.795] Browser LOG     üí∞ Native CHZ balance: 16.002796918 CHZ
[00:00:47.795] Browser LOG     ‚è≥ Sending native CHZ payment...
[00:00:47.795] Browser LOG     üíµ Amount: 1.0 CHZ
[00:00:57.140] Browser LOG     üìù Payment transaction sent: 0xda5a9a9893060052fa92af5a2912172160873b6355a00307203866b4e2a54322
[00:01:05.908] Server  LOG     üîµ Payment confirmation request received
[00:01:05.911] Browser LOG     ‚úÖ Payment confirmed! TX: 0xda5a9a9893060052fa92af5a2912172160873b6355a00307203866b4e2a54322
[00:01:05.911] Browser LOG     üîÑ Confirming payment with backend...
[00:01:05.911] Browser LOG     üì§ Sending txHash: 0xda5a9a9893060052fa92af5a2912172160873b6355a00307203866b4e2a54322
[00:01:05.911] Browser LOG     üì§ Authenticated address: 0x133E676148B785eBf67351FF806162803E3a042C
[00:01:05.912] Server  LOG     prisma:query "SELECT 1"
[00:01:05.914] Server  LOG     prisma:query "SELECT \"public\".\"sessions\".\"id\", \"public\".\"sessions\".\"userId\", \"public\".\"sessions\".\"token\", \"public\".\"sessions\".\"createdAt\", \"public\".\"sessions\".\"expiresAt\" FROM \"public\".\"sessions\" WHERE (\"public\".\"sessions\".\"token\" = $1 AND 1=1) LIMIT $2 OFFSET $3"
[00:01:05.914] Server  LOG     prisma:query "SELECT \"public\".\"users\".\"id\", \"public\".\"users\".\"address\", \"public\".\"users\".\"nonce\", \"public\".\"users\".\"isLoggedIn\", \"public\".\"users\".\"createdAt\", \"public\".\"users\".\"updatedAt\" FROM \"public\".\"users\" WHERE \"public\".\"users\".\"id\" IN ($1) OFFSET $2"
[00:01:05.914] Server  LOG     ‚úÖ User authenticated: "0x133e676148b785ebf67351ff806162803e3a042c"
[00:01:05.915] Server  LOG     üì¶ Request body: {}
[00:01:05.915] Server  LOG     ‚úÖ txHash validated: "0xda5a9a9893060052fa92af5a2912172160873b6355a00307203866b4e2a54322"
[00:01:05.917] Server  LOG     prisma:query "SELECT \"public\".\"payments\".\"id\", \"public\".\"payments\".\"userId\", \"public\".\"payments\".\"txHash\", \"public\".\"payments\".\"amount\", \"public\".\"payments\".\"status\"::text, \"public\".\"payments\".\"createdAt\", \"public\".\"payments\".\"updatedAt\" FROM \"public\".\"payments\" WHERE (\"public\".\"payments\".\"txHash\" = $1 AND 1=1) LIMIT $2 OFFSET $3"
[00:01:06.189] Server  LOG     prisma:query "INSERT INTO \"public\".\"payments\" (\"id\",\"userId\",\"txHash\",\"amount\",\"status\",\"createdAt\",\"updatedAt\") VALUES ($1,$2,$3,$4,CAST($5::text AS \"public\".\"PaymentStatus\"),$6,$7) ON CONFLICT (\"txHash\") DO UPDATE SET \"status\" = CAST($8::text AS \"public\".\"PaymentStatus\"), \"amount\" = $9, \"updatedAt\" = $10 WHERE (\"public\".\"payments\".\"txHash\" = $11 AND 1=1) RETURNING \"public\".\"payments\".\"id\", \"public\".\"payments\".\"userId\", \"public\".\"payments\".\"txHash\", \"public\".\"payments\".\"amount\", \"public\".\"payments\".\"status\"::text, \"public\".\"payments\".\"createdAt\", \"public\".\"payments\".\"updatedAt\""
[00:01:06.191] Server  LOG     prisma:query "UPDATE \"public\".\"users\" SET \"isLoggedIn\" = $1, \"updatedAt\" = $2 WHERE (\"public\".\"users\".\"id\" = $3 AND 1=1) RETURNING \"public\".\"users\".\"id\", \"public\".\"users\".\"address\", \"public\".\"users\".\"nonce\", \"public\".\"users\".\"isLoggedIn\", \"public\".\"users\".\"createdAt\", \"public\".\"users\".\"updatedAt\""
[00:01:06.191] Server  LOG     ‚úÖ User 0x133e676148b785ebf67351ff806162803e3a042c is now logged in after payment
[00:01:06.300] Browser LOG     üì° Confirmation response status: 200
[00:01:06.300] Browser LOG     üì° Response headers: {"connection":"keep-alive","content-type":"application/json","date":"Sun, 23 Nov 2025 10:55:46 GMT","keep-alive":"timeout=5","transfer-encoding":"chunked","vary":"rsc, next-router-state-tree, next-router-prefetch, next-router-segment-prefetch"}
[00:01:06.300] Browser LOG     ‚úÖ Backend confirmation successful: {"payment":{"amount":"0","createdAt":"2025-11-23T10:55:46.805Z","id":"cmiblqw6t0004ubs3shchaajm","txHash":"0xda5a9a9893060052fa92af5a2912172160873b6355a00307203866b4e2a54322"},"status":"CONFIRMED","success":true}
[00:01:06.300] Browser LOG     ‚úÖ Payment confirmed, moving to step 3
[00:01:06.300] Browser LOG     üîç Payment status: confirmed
[00:01:06.300] Browser LOG     üîç Current step: 2
[00:01:06.300] Browser LOG     ‚ö†Ô∏è Cleanup called before redirect
[00:01:26.274] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:01:26.288] Server  LOG     prisma:query "SELECT 1"
[00:01:26.288] Server  LOG     prisma:query "SELECT \"public\".\"sessions\".\"id\", \"public\".\"sessions\".\"userId\", \"public\".\"sessions\".\"token\", \"public\".\"sessions\".\"createdAt\", \"public\".\"sessions\".\"expiresAt\" FROM \"public\".\"sessions\" WHERE (\"public\".\"sessions\".\"token\" = $1 AND 1=1) LIMIT $2 OFFSET $3"
[00:01:26.288] Server  LOG     prisma:query "SELECT \"public\".\"users\".\"id\", \"public\".\"users\".\"address\", \"public\".\"users\".\"nonce\", \"public\".\"users\".\"isLoggedIn\", \"public\".\"users\".\"createdAt\", \"public\".\"users\".\"updatedAt\" FROM \"public\".\"users\" WHERE \"public\".\"users\".\"id\" IN ($1) OFFSET $2"
[00:01:26.396] Browser LOG     üîç Checking login status...
[00:01:26.396] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:01:26.396] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:01:26.396] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","r":"","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1763895366912}
[00:01:26.396] Browser LOG     üìä Login status: {"isAuthenticated":true,"isLoggedIn":true,"user":{"address":"0x133e676148b785ebf67351ff806162803e3a042c","id":"cmib79tzf0000nj4dgbd4pfkn"}}
